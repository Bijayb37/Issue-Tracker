{"ast":null,"code":"var _jsxFileName = \"/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/components/ProjectForm.js\";\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Modal from \"react-bootstrap/Modal\";\nimport Select from 'react-select';\n\nfunction ProjectForm({\n  project,\n  users,\n  postProject,\n  edit,\n  patchProject,\n  projectId,\n  setProjectId,\n  errors,\n  show,\n  setShow,\n  removeError\n}) {\n  const initialState = {\n    projectName: undefined,\n    description: undefined,\n    startDate: undefined,\n    targetEndDate: undefined,\n    assignedUser: undefined\n  };\n  const [state, setState] = useState(initialState);\n\n  const handleClose = () => {\n    setShow(prev => ({ ...prev,\n      createModal: false\n    }));\n    setState(initialState);\n    setProjectId(\"\");\n    removeError();\n  };\n\n  useEffect(() => {\n    if (edit && project) {\n      const newDateString = new Date(project.targetEndDate).toISOString().split('T')[0];\n      setState({ ...project,\n        targetEndDate: newDateString\n      });\n    }\n  }, [project, setProjectId, edit]); // useEffect(() => {\n  //     if (edit && issue) {\n  //         const newDateString = new Date(issue.targetEndDate).toISOString().split('T')[0]\n  //         setState({ ...issue, targetEndDate: newDateString, project: issue.project._id, user: issue.createdBy._id })\n  //     }\n  // }, [issue, setIssueId, edit])\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    switch (e.target.name) {\n      case \"create\":\n        postProject(state).then(res => handleClose());\n        break;\n\n      case \"edit\":\n        patchProject(projectId, state).then(res => handleClose());\n        break;\n\n      default:\n        return;\n    }\n  }; //mapping onto a react-select array of objects\n\n\n  const userOptions = users.map((user, i) => ({\n    label: user.username,\n    value: user._id\n  })); //filter users for default values of multi select\n\n  const filterUsers = userOptions.filter(user => project === null || project === void 0 ? void 0 : project.assignedUsers.includes(user.value));\n\n  const handleChange = e => {\n    setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleMultipleSelect = e => {\n    const newState = e.map(val => val.value);\n    setState(prev => ({ ...prev,\n      assignedUsers: newState\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, edit ? \"Edit Project\" : \"Create Project\"), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: handleClose,\n    className: \"bi bi-x-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginInputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"projectName\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Project Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.projectName ? state.projectName : \"\",\n    onChange: handleChange,\n    type: \"text\",\n    className: \"form-control\",\n    name: \"projectName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.description ? state.description : \"\",\n    onChange: handleChange,\n    type: \"text\",\n    className: \"form-control\",\n    name: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"startDate\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }, \"Start Date\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.startDate ? state.startDate : \"\",\n    onChange: handleChange,\n    type: \"date\",\n    className: \"form-control\",\n    name: \"startDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"targetEndDate\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 33\n    }\n  }, \"Target End Date\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.targetEndDate ? state.targetEndDate : \"\",\n    onChange: handleChange,\n    type: \"date\",\n    className: \"form-control\",\n    name: \"targetEndDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"assignedUsers\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 33\n    }\n  }, \"User\"), /*#__PURE__*/React.createElement(Select, {\n    isMulti: true,\n    defaultValue: filterUsers,\n    name: \"colors\",\n    options: userOptions,\n    className: \"basic-multi-select\",\n    classNamePrefix: \"select\",\n    onChange: handleMultipleSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 33\n    }\n  }))))), errors.message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger d-flex align-items-center\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"bi bi-exclamation-triangle-fill\",\n    style: {\n      fontSize: \"20px\",\n      paddingRight: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, errors.message)), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, edit ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClose,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    name: \"edit\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"Edit changes\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClose,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    name: \"create\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, \"Create Project\")))));\n}\n\nexport default withRouter(ProjectForm);","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/components/ProjectForm.js"],"names":["React","useState","useEffect","withRouter","Modal","Select","ProjectForm","project","users","postProject","edit","patchProject","projectId","setProjectId","errors","show","setShow","removeError","initialState","projectName","undefined","description","startDate","targetEndDate","assignedUser","state","setState","handleClose","prev","createModal","newDateString","Date","toISOString","split","handleSubmit","e","preventDefault","target","name","then","res","userOptions","map","user","i","label","username","value","_id","filterUsers","filter","assignedUsers","includes","handleChange","handleMultipleSelect","newState","val","message","fontSize","paddingRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Modal from \"react-bootstrap/Modal\"\nimport Select from 'react-select';\n\nfunction ProjectForm({ project, users, postProject, edit, patchProject, projectId, setProjectId, errors, show, setShow, removeError }) {\n    const initialState = {\n        projectName: undefined,\n        description: undefined,\n        startDate: undefined,\n        targetEndDate: undefined,\n        assignedUser: undefined,\n    }\n    const [state, setState] = useState(initialState)\n\n    const handleClose = () => {\n        setShow(prev => ({ ...prev, createModal: false }));\n        setState(initialState)\n        setProjectId(\"\")\n        removeError()\n    }\n\n    useEffect(() => {\n        if (edit && project) {\n            const newDateString = new Date(project.targetEndDate).toISOString().split('T')[0]\n            setState({ ...project, targetEndDate: newDateString })\n        }\n    }, [project, setProjectId, edit])\n\n    // useEffect(() => {\n    //     if (edit && issue) {\n    //         const newDateString = new Date(issue.targetEndDate).toISOString().split('T')[0]\n    //         setState({ ...issue, targetEndDate: newDateString, project: issue.project._id, user: issue.createdBy._id })\n    //     }\n    // }, [issue, setIssueId, edit])\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        switch (e.target.name) {\n            case \"create\":\n                postProject(state)\n                    .then(res => handleClose())\n                break\n            case \"edit\":\n                patchProject(projectId, state)\n                    .then(res => handleClose())\n                break\n            default:\n                return\n        }\n    }\n\n    //mapping onto a react-select array of objects\n    const userOptions = users.map((user, i) => (\n        { label: user.username, value: user._id }\n    ))\n    //filter users for default values of multi select\n    const filterUsers = userOptions.filter(user => project?.assignedUsers.includes(user.value))\n\n    const handleChange = (e) => {\n        setState({ ...state, [e.target.name]: e.target.value })\n    }\n\n    const handleMultipleSelect = e => {\n        const newState = e.map(val => val.value)\n        setState(prev => ({ ...prev, assignedUsers: newState }))\n    }\n    return (\n        <div>\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header >\n                    <Modal.Title>{edit ? \"Edit Project\" : \"Create Project\"}</Modal.Title>\n                    <i onClick={handleClose} className=\"bi bi-x-lg\"></i>\n                </Modal.Header>\n                <Modal.Body>\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"loginInputs\">\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"projectName\" className=\"form-label\">Project Name</label>\n                                <input value={state.projectName ? state.projectName : \"\"} onChange={handleChange} type=\"text\" className=\"form-control\" name=\"projectName\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"description\" className=\"form-label\">Description</label>\n                                <input value={state.description ? state.description : \"\"} onChange={handleChange} type=\"text\" className=\"form-control\" name=\"description\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"startDate\" className=\"form-label\">Start Date</label>\n                                <input value={state.startDate ? state.startDate : \"\"} onChange={handleChange} type=\"date\" className=\"form-control\" name=\"startDate\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"targetEndDate\" className=\"form-label\">Target End Date</label>\n                                <input value={state.targetEndDate ? state.targetEndDate : \"\"} onChange={handleChange} type=\"date\" className=\"form-control\" name=\"targetEndDate\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"assignedUsers\" className=\"form-label\">User</label>\n                                <Select\n                                    isMulti\n                                    defaultValue={filterUsers}\n                                    name=\"colors\"\n                                    options={userOptions}\n                                    className=\"basic-multi-select\"\n                                    classNamePrefix=\"select\"\n                                    onChange={handleMultipleSelect}\n                                />\n                            </div>\n                        </div>\n                    </form>\n                </Modal.Body>\n                {errors.message &&\n                    <div className=\"alert alert-danger d-flex align-items-center\" role=\"alert\">\n                        <i className=\"bi bi-exclamation-triangle-fill\" style={{ fontSize: \"20px\", paddingRight: \"10px\" }}></i>\n                        <div>\n                            {errors.message}\n                        </div>\n                    </div>\n                }\n                <Modal.Footer>\n                    {edit ?\n                        <>\n                            <button onClick={handleClose} type=\"button\" className=\"btn btn-secondary\" >Close</button>\n                            <button onClick={handleSubmit} name=\"edit\" type=\"button\" className=\"btn btn-primary\">Edit changes</button>\n                        </>\n                        :\n                        <>\n                            <button onClick={handleClose} type=\"button\" className=\"btn btn-secondary\" >Close</button>\n                            <button onClick={handleSubmit} name=\"create\" type=\"button\" className=\"btn btn-primary\">Create Project</button>\n                        </>\n                    }\n                </Modal.Footer>\n            </Modal>\n        </div >\n    )\n\n}\n\nexport default withRouter(ProjectForm)"]},"metadata":{},"sourceType":"module"}