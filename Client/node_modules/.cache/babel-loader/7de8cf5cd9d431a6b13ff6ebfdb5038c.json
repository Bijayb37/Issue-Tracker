{"ast":null,"code":"import axios from \"axios\";\nimport { apiCall } from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"./errorActions\";\n\nfunction setUser(user) {\n  console.log(user);\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\n\nexport function setTokenHeader(token) {\n  if (token) {\n    console.log(token);\n    axios.defaults.header.common['Authorization'] = `Bearer ${token}`;\n  } else {\n    axios.defaults.header.common['Authorization'] = {};\n  }\n}\nexport function authUser(type, userData) {\n  console.log(userData);\n  return dispatch => {\n    return new Promise((resolve, reject) => {\n      apiCall('post', `api/auth/${type}`, {\n        username: 2,\n        password: 2\n      }).then(({\n        token,\n        ...userInfo\n      }) => {\n        localStorage.setItem(\"jawt\", token); // setTokenHeader(token)\n\n        dispatch(setUser(userInfo)); // dispatch(removeError())\n\n        resolve();\n      }).catch(err => {\n        dispatch(addError(err));\n        reject();\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/store/actions/userActions.js"],"names":["axios","apiCall","SET_CURRENT_USER","addError","removeError","setUser","user","console","log","type","setTokenHeader","token","defaults","header","common","authUser","userData","dispatch","Promise","resolve","reject","username","password","then","userInfo","localStorage","setItem","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,gBAAtC;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACnBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAO;AACHG,IAAAA,IAAI,EAAEP,gBADH;AAEHI,IAAAA;AAFG,GAAP;AAIH;;AAED,OAAO,SAASI,cAAT,CAAwBC,KAAxB,EAA+B;AAClC,MAAIA,KAAJ,EAAW;AACPJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACAX,IAAAA,KAAK,CAACY,QAAN,CAAeC,MAAf,CAAsBC,MAAtB,CAA6B,eAA7B,IAAiD,UAASH,KAAM,EAAhE;AACH,GAHD,MAGO;AACHX,IAAAA,KAAK,CAACY,QAAN,CAAeC,MAAf,CAAsBC,MAAtB,CAA6B,eAA7B,IAAgD,EAAhD;AACH;AACJ;AACD,OAAO,SAASC,QAAT,CAAkBN,IAAlB,EAAwBO,QAAxB,EAAkC;AACrCT,EAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACA,SAAOC,QAAQ,IAAI;AACf,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACrCnB,MAAAA,OAAO,CAAC,MAAD,EAAU,YAAWQ,IAAK,EAA1B,EAA6B;AAAEY,QAAAA,QAAQ,EAAE,CAAZ;AAAeC,QAAAA,QAAQ,EAAE;AAAzB,OAA7B,CAAP,CACCC,IADD,CACM,CAAC;AAACZ,QAAAA,KAAD;AAAQ,WAAGa;AAAX,OAAD,KAA0B;AAC3BC,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6Bf,KAA7B,EAD2B,CAE3B;;AACAM,QAAAA,QAAQ,CAACZ,OAAO,CAACmB,QAAD,CAAR,CAAR,CAH2B,CAI3B;;AACAL,QAAAA,OAAO;AACX,OAPD,EAQCQ,KARD,CAQOC,GAAG,IAAI;AACVX,QAAAA,QAAQ,CAACd,QAAQ,CAACyB,GAAD,CAAT,CAAR;AACAR,QAAAA,MAAM;AACT,OAXD;AAYF,KAbM,CAAP;AAcH,GAfD;AAgBH","sourcesContent":["import axios from \"axios\";\nimport { apiCall } from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"./errorActions\";\n\nfunction setUser(user) {\n    console.log(user)\n    return {\n        type: SET_CURRENT_USER,\n        user\n    }\n}\n\nexport function setTokenHeader(token) {\n    if (token) { \n        console.log(token)\n        axios.defaults.header.common['Authorization'] = `Bearer ${token}`\n    } else {\n        axios.defaults.header.common['Authorization'] = {}\n    }\n}\nexport function authUser(type, userData) {\n    console.log(userData)\n    return dispatch => {\n        return new Promise((resolve, reject) => {\n           apiCall('post', `api/auth/${type}`, { username: 2, password: 2})\n           .then(({token, ...userInfo}) => {\n                localStorage.setItem(\"jawt\", token)\n                // setTokenHeader(token)\n                dispatch(setUser(userInfo))\n                // dispatch(removeError())\n                resolve()\n           })\n           .catch(err => {\n               dispatch(addError(err))\n               reject() \n           }) \n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}