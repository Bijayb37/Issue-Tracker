{"ast":null,"code":"import { apiCall } from \"../../services/api\";\nimport { ADD_ISSUE, LOAD_ISSUES, REMOVE_ISSUES, UPDATE_ISSUES } from \"../actionTypes\";\nimport { addError, removeError } from './errorActions';\nimport axios from 'axios'; //api call syntax apiCall(method, path, payload)\n\nfunction loadIssues(issues) {\n  return {\n    type: LOAD_ISSUES,\n    issues\n  };\n}\n\nfunction updateIssue(id, newIssue) {\n  return {\n    type: UPDATE_ISSUES,\n    id,\n    issue: newIssue\n  };\n}\n\nfunction removeIssue(id) {\n  return {\n    type: REMOVE_ISSUES,\n    id\n  };\n}\n\nfunction addIssue(issue) {\n  return {\n    type: ADD_ISSUE,\n    issue\n  };\n}\n\nexport function getIssues() {\n  return dispatch => {\n    apiCall(\"get\", \"/api/issues\").then(res => {\n      dispatch(loadIssues(res));\n    });\n  };\n} // export function postIssue(issueData) {\n//     return async (dispatch, getState) => {\n//         function onSuccess(success) {\n//             // dispatch({ type: CREATE_USER, payload: success });\n//             return success;\n//           }\n//           function onError(error) {\n//               console.log(error)\n//             // dispatch({ type: ERROR_GENERATED, error });\n//             return error;\n//           }\n//         const { currentUser } = getState()\n//         const { id } = currentUser.user\n//         apiCall(\"post\", `/api/users/${id}/issues`, issueData)\n//         .then(res => {\n//             dispatch(removeError())\n//             // dispatch(addIssue(res))\n//             return onSuccess(res)\n//         })\n//         .catch(err => {\n//             dispatch(addError(err.message))\n//             return onError(err)\n//         })\n//     }\n// }\n\nexport function postIssue(params) {\n  return async (dispatch, getState) => {\n    function onSuccess(success) {\n      console.log(success);\n      dispatch(removeError()); // dispatch(addIssue(success))\n\n      return success;\n    }\n\n    function onError(error) {\n      console.log(error); // dispatch(addError(error.message))\n\n      return error;\n    }\n\n    try {\n      const {\n        currentUser\n      } = getState();\n      const {\n        id\n      } = currentUser.user;\n      const success = await apiCall(\"post\", `/api/users/${id}/issues`, params);\n      return onSuccess(success);\n    } catch (error) {\n      return onError(error);\n    }\n  };\n}\nexport function editIssue(issueId, issueData) {\n  return (dispatch, getState) => {\n    const {\n      currentUser\n    } = getState();\n    const {\n      id\n    } = currentUser.user;\n    apiCall(\"patch\", `/api/users/${id}/issues/${issueId}`, issueData).then(res => {\n      dispatch(removeError());\n      dispatch(updateIssue(res.issue._id, res.issue));\n    }).catch(err => {\n      dispatch(addError(err.message));\n    });\n  };\n}\nexport function deleteIssue(issueId) {\n  return (dispatch, getState) => {\n    const {\n      currentUser\n    } = getState();\n    const {\n      id\n    } = currentUser.user;\n    apiCall(\"delete\", `/api/users/${id}/issues/${issueId}`).then(res => dispatch(removeIssue(res.issue._id))).catch(err => console.log(err.message));\n  };\n}","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/store/actions/issueActions.js"],"names":["apiCall","ADD_ISSUE","LOAD_ISSUES","REMOVE_ISSUES","UPDATE_ISSUES","addError","removeError","axios","loadIssues","issues","type","updateIssue","id","newIssue","issue","removeIssue","addIssue","getIssues","dispatch","then","res","postIssue","params","getState","onSuccess","success","console","log","onError","error","currentUser","user","editIssue","issueId","issueData","_id","catch","err","message","deleteIssue"],"mappings":"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","sourcesContent":["import { apiCall } from \"../../services/api\";\nimport { ADD_ISSUE, LOAD_ISSUES, REMOVE_ISSUES, UPDATE_ISSUES } from \"../actionTypes\";\nimport { addError, removeError } from './errorActions'\nimport axios from 'axios'\n\n//api call syntax apiCall(method, path, payload)\nfunction loadIssues(issues) {\n    return {\n        type: LOAD_ISSUES,\n        issues\n    }\n}\n\nfunction updateIssue(id, newIssue) {\n    return {\n        type: UPDATE_ISSUES,\n        id,\n        issue: newIssue\n    }\n}\n\nfunction removeIssue(id) {\n    return {\n        type: REMOVE_ISSUES,\n        id\n    }\n}\n\nfunction addIssue(issue) {\n    return {\n        type: ADD_ISSUE,\n        issue\n    }\n}\n\nexport function getIssues() {\n    return dispatch => {\n        apiCall(\"get\", \"/api/issues\")\n        .then(res => {\n            dispatch(loadIssues(res))\n        })\n    }\n}\n\n// export function postIssue(issueData) {\n//     return async (dispatch, getState) => {\n//         function onSuccess(success) {\n//             // dispatch({ type: CREATE_USER, payload: success });\n//             return success;\n//           }\n\n//           function onError(error) {\n//               console.log(error)\n//             // dispatch({ type: ERROR_GENERATED, error });\n//             return error;\n//           }\n//         const { currentUser } = getState()\n//         const { id } = currentUser.user\n//         apiCall(\"post\", `/api/users/${id}/issues`, issueData)\n//         .then(res => {\n//             dispatch(removeError())\n//             // dispatch(addIssue(res))\n//             return onSuccess(res)\n//         })\n//         .catch(err => {\n//             dispatch(addError(err.message))\n//             return onError(err)\n//         })\n//     }\n// }\n\nexport function postIssue(params) {  \n    return async (dispatch, getState) => {\n      function onSuccess(success) {\n          console.log(success)\n                    dispatch(removeError())\n            // dispatch(addIssue(success))\n        return success;\n      }\n      function onError(error) {\n        console.log(error)\n        // dispatch(addError(error.message))\n        return error;\n      }\n      try {\n                  const { currentUser } = getState()\n        const { id } = currentUser.user\n        const success = await apiCall(\"post\", `/api/users/${id}/issues`, params);\n        return onSuccess(success);\n      } catch (error) {\n        return onError(error);\n      }\n    }\n  }\n\nexport function editIssue(issueId, issueData) {\n    return (dispatch, getState) => {\n        const { currentUser } = getState()\n        const { id } = currentUser.user\n        apiCall(\"patch\", `/api/users/${id}/issues/${issueId}`, issueData)\n        .then(res => {\n            dispatch(removeError())\n            dispatch(updateIssue(res.issue._id, res.issue))\n\n        })\n        .catch(err => {\n            dispatch(addError(err.message))\n        })\n    }\n}\n\nexport function deleteIssue(issueId) {\n    return (dispatch, getState) => {\n        const { currentUser } = getState()\n        const { id } = currentUser.user \n        apiCall(\"delete\", `/api/users/${id}/issues/${issueId}`)\n        .then(res => dispatch(removeIssue(res.issue._id)))\n        .catch(err => console.log(err.message))\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}