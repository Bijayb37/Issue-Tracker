{"ast":null,"code":"var _jsxFileName = \"/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/components/IssuesForm.js\";\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Modal from \"react-bootstrap/Modal\";\nimport Select from 'react-select';\n\nfunction IssuesForm({\n  issue,\n  postIssue,\n  users,\n  edit,\n  projects,\n  patchIssue,\n  issueId,\n  setIssueId,\n  errors,\n  show,\n  setShow,\n  removeError\n}) {\n  const initialState = {\n    title: undefined,\n    description: undefined,\n    targetEndDate: undefined,\n    project: undefined,\n    assignedUsers: [],\n    priority: \"low\",\n    status: \"open\",\n    type: \"bugs/error\"\n  };\n  const [state, setState] = useState(initialState);\n\n  const handleClose = () => {\n    setShow(false);\n    setState(initialState);\n    setIssueId(\"\");\n    removeError();\n  };\n\n  useEffect(() => {\n    if (edit && issue) {\n      const newDateString = new Date(issue.targetEndDate).toISOString().split('T')[0];\n      setState({ ...issue,\n        targetEndDate: newDateString,\n        project: issue.project._id,\n        user: issue.createdBy._id\n      });\n    }\n  }, [issue, setIssueId, edit]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    switch (e.target.name) {\n      case \"create\":\n        postIssue(state).then(res => handleClose());\n        break;\n\n      case \"edit\":\n        patchIssue(issueId, state);\n        break;\n\n      default:\n        return;\n    }\n  }; //select options for projects\n\n\n  const projectOptions = projects.map((project, i) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: project._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 16\n      }\n    }, project.projectName);\n  }); //mapping onto a react-select array of objects\n\n  const userOptions = users.map((user, i) => ({\n    label: user.username,\n    value: user._id\n  }));\n  const filterUsers = users.filter(user => issue.assignedUsers.includes(user._ids));\n  console.log(issue);\n\n  const handleChange = e => {\n    setState(prev => ({ ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleMultipleSelect = (e, name) => {\n    setState(prev => {\n      var _name$option;\n\n      return { ...prev,\n        assignedUsers: [...state.assignedUsers, (_name$option = name.option) === null || _name$option === void 0 ? void 0 : _name$option.label]\n      };\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, edit ? \"Edit Issue\" : \"Create Issue\"), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: handleClose,\n    className: \"bi bi-x-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginInputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.title ? state.title : \"\",\n    onChange: handleChange,\n    type: \"text\",\n    className: \"form-control\",\n    name: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.description ? state.description : \"\",\n    onChange: handleChange,\n    type: \"text\",\n    className: \"form-control\",\n    name: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"targetEndDate\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 33\n    }\n  }, \"Target End Date\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: state.targetEndDate ? state.targetEndDate : \"\",\n    onChange: handleChange,\n    type: \"date\",\n    className: \"form-control\",\n    name: \"targetEndDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"assignedUsers\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  }, \"User\"), /*#__PURE__*/React.createElement(Select, {\n    isMulti: true,\n    defaultValue: \"61132f5addae3d476bf77a8c\",\n    name: \"colors\",\n    options: userOptions,\n    className: \"basic-multi-select\",\n    classNamePrefix: \"select\",\n    onChange: handleMultipleSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"project\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }, \"Project\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: state.project ? state.project : \"\",\n    name: \"project\",\n    onChange: handleChange,\n    className: \"form-select\",\n    \"aria-label\": \"Default select example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 37\n    }\n  }), projectOptions)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"priority\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Priority\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: state.priority ? state.priority : \"low\",\n    name: \"priority\",\n    onChange: handleChange,\n    className: \"form-select\",\n    \"aria-label\": \"Default select example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"low\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 37\n    }\n  }, \"Low\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 37\n    }\n  }, \"Medium\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"high\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 37\n    }\n  }, \"High\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"status\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: state.status ? state.status : \"open\",\n    name: \"status\",\n    onChange: handleChange,\n    className: \"form-select\",\n    \"aria-label\": \"Default select example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"open\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }, \"Open\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"inProgress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 37\n    }\n  }, \"In Progress\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"completed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 37\n    }\n  }, \"Completed\"))), \"Work needs to be done here\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"type\",\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 33\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: state.type ? state.type : \"bugs/error\",\n    name: \"type\",\n    onChange: handleChange,\n    className: \"form-select\",\n    \"aria-label\": \"Default select example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"bugs/error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, \"Bugs/Error\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"feature\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 37\n    }\n  }, \"Feature\")))))), errors.message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger d-flex align-items-center\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"bi bi-exclamation-triangle-fill\",\n    style: {\n      fontSize: \"20px\",\n      paddingRight: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, errors.message)), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, edit ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClose,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    name: \"edit\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"Edit changes\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleClose,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    name: \"create\",\n    type: \"button\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, \"Create Issue\")))));\n}\n\nexport default withRouter(IssuesForm);","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/components/IssuesForm.js"],"names":["React","useState","useEffect","withRouter","Modal","Select","IssuesForm","issue","postIssue","users","edit","projects","patchIssue","issueId","setIssueId","errors","show","setShow","removeError","initialState","title","undefined","description","targetEndDate","project","assignedUsers","priority","status","type","state","setState","handleClose","newDateString","Date","toISOString","split","_id","user","createdBy","handleSubmit","e","preventDefault","target","name","then","res","projectOptions","map","i","projectName","userOptions","label","username","value","filterUsers","filter","includes","_ids","console","log","handleChange","prev","handleMultipleSelect","option","message","fontSize","paddingRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport Modal from \"react-bootstrap/Modal\"\nimport Select from 'react-select';\n\n\nfunction IssuesForm({ issue, postIssue, users, edit, projects, patchIssue, issueId, setIssueId, errors, show, setShow, removeError }) {\n    const initialState = {\n        title: undefined,\n        description: undefined,\n        targetEndDate: undefined,\n        project: undefined,\n        assignedUsers: [],\n        priority: \"low\",\n        status: \"open\",\n        type: \"bugs/error\",\n    }\n    const [state, setState] = useState(initialState)\n\n    const handleClose = () => {\n        setShow(false);\n        setState(initialState)\n        setIssueId(\"\")\n        removeError()\n    }\n    \n    useEffect(() => {\n        if (edit && issue) {\n            const newDateString = new Date(issue.targetEndDate).toISOString().split('T')[0]\n            setState({ ...issue, targetEndDate: newDateString, project: issue.project._id, user: issue.createdBy._id })\n        }\n    }, [issue, setIssueId, edit])\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        switch (e.target.name) {\n            case \"create\":\n                postIssue(state)\n                    .then(res => handleClose())\n                break\n            case \"edit\":\n                patchIssue(issueId, state)\n                break\n            default:\n                return\n        }\n    }\n    //select options for projects\n    const projectOptions = projects.map((project, i) => {\n        return <option key={i} value={project._id}>{project.projectName}</option>\n    })\n    //mapping onto a react-select array of objects\n    const userOptions = users.map((user, i) => (\n        { label: user.username, value: user._id}\n    ))\n    \n    const filterUsers = users.filter(user => issue.assignedUsers.includes(user._ids) )\n    console.log(issue)\n    const handleChange = e => {\n        setState(prev => ({ ...prev, [e.target.name]: e.target.value }))\n    }\n    const handleMultipleSelect = (e, name) => {\n        setState(prev => ({...prev, assignedUsers: [...state.assignedUsers, name.option?.label]}))\n    } \n\n    return (\n        <div>\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header >\n                    <Modal.Title>{edit ? \"Edit Issue\" : \"Create Issue\"}</Modal.Title>\n                    <i onClick={handleClose} className=\"bi bi-x-lg\"></i>\n                </Modal.Header>\n                <Modal.Body>\n                    <form onSubmit={handleSubmit}>\n                        <div className=\"loginInputs\">\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"title\" className=\"form-label\">Title</label>\n                                <input value={state.title ? state.title : \"\"} onChange={handleChange} type=\"text\" className=\"form-control\" name=\"title\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"description\" className=\"form-label\">Description</label>\n                                <input value={state.description ? state.description : \"\"} onChange={handleChange} type=\"text\" className=\"form-control\" name=\"description\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"targetEndDate\" className=\"form-label\">Target End Date</label>\n                                <input value={state.targetEndDate ? state.targetEndDate : \"\"} onChange={handleChange} type=\"date\" className=\"form-control\" name=\"targetEndDate\" />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"assignedUsers\" className=\"form-label\">User</label>\n                                {/* <select value={state.assignedUsers ? state.assignedUsers : \"\"} name=\"assignedUsers\" onChange={handleChange} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option ></option>\n                                    {userOptions}\n                                </select> */}\n                                <Select\n                                    isMulti\n                                    defaultValue={\"61132f5addae3d476bf77a8c\"}\n                                    name=\"colors\"\n                                    options={userOptions}\n                                    className=\"basic-multi-select\"\n                                    classNamePrefix=\"select\"\n                                    onChange={handleMultipleSelect}\n                                />\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"project\" className=\"form-label\">Project</label>\n                                <select value={state.project ? state.project : \"\"} name=\"project\" onChange={handleChange} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option ></option>\n                                    {projectOptions}\n                                </select>\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"priority\" className=\"form-label\">Priority</label>\n                                <select value={state.priority ? state.priority : \"low\"} name=\"priority\" onChange={handleChange} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option value=\"low\">Low</option>\n                                    <option value=\"medium\">Medium</option>\n                                    <option value=\"high\">High</option>\n                                </select>\n                            </div>\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"status\" className=\"form-label\">Status</label>\n                                <select value={state.status ? state.status : \"open\"} name=\"status\" onChange={handleChange} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option value=\"open\">Open</option>\n                                    <option value=\"inProgress\">In Progress</option>\n                                    <option value=\"completed\">Completed</option>\n                                </select>\n                            </div>\n                            Work needs to be done here\n                            <div className=\"mb-3\" >\n                                <label htmlFor=\"type\" className=\"form-label\">Type</label>\n                                <select value={state.type ? state.type : \"bugs/error\"} name=\"type\" onChange={handleChange} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option value=\"bugs/error\">Bugs/Error</option>\n                                    <option value=\"feature\">Feature</option>\n                                </select>\n                            </div>\n                        </div>\n                    </form>\n                </Modal.Body>\n                {errors.message &&\n                    <div className=\"alert alert-danger d-flex align-items-center\" role=\"alert\">\n                        <i className=\"bi bi-exclamation-triangle-fill\" style={{ fontSize: \"20px\", paddingRight: \"10px\" }}></i>\n                        <div>\n                            {errors.message}\n                        </div>\n                    </div>\n                }\n                <Modal.Footer>\n                    {edit ?\n                        <>\n                            <button onClick={handleClose} type=\"button\" className=\"btn btn-secondary\">Close</button>\n                            <button onClick={handleSubmit} name=\"edit\" type=\"button\" className=\"btn btn-primary\">Edit changes</button>\n                        </>\n                        :\n                        <>\n                            <button onClick={handleClose} type=\"button\" className=\"btn btn-secondary\">Close</button>\n                            <button onClick={handleSubmit} name=\"create\" type=\"button\" className=\"btn btn-primary\">Create Issue</button>\n                        </>\n                    }\n                </Modal.Footer>\n            </Modal>\n        </div >\n    )\n\n}\n\nexport default withRouter(IssuesForm)"]},"metadata":{},"sourceType":"module"}