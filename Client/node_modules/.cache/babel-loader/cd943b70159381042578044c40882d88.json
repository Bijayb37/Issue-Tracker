{"ast":null,"code":"import axios from \"axios\";\nimport { apiCall } from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"./errorActions\";\nconst stuff = {\n  id: \"60d5df9269c6901c8801baaf\",\n  username: \"2\"\n};\n\nfunction setUser(user) {\n  console.log(user);\n  return {\n    type: SET_CURRENT_USER,\n    user: stuff\n  };\n}\n\nexport function setTokenHeader(token) {\n  if (token) {\n    console.log(token);\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.header.common['Authorization'];\n  }\n}\nexport function authUser(type, userData) {\n  return dispatch => {\n    return new Promise((resolve, reject) => {\n      apiCall('post', `api/auth/${type}`, userData).then(({\n        token,\n        ...userInfo\n      }) => {\n        localStorage.setItem(\"jwtToken\", token);\n        setTokenHeader(token);\n        console.log(userInfo);\n        dispatch(setUser(userInfo));\n        dispatch(removeError());\n        resolve();\n      }).catch(err => {\n        //    dispatch(addError(err))\n        console.log(err);\n        reject();\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/bijaybohora/Documents/100 days/IssueTracker/Client/src/store/actions/userActions.js"],"names":["axios","apiCall","SET_CURRENT_USER","addError","removeError","stuff","id","username","setUser","user","console","log","type","setTokenHeader","token","defaults","headers","common","header","authUser","userData","dispatch","Promise","resolve","reject","then","userInfo","localStorage","setItem","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,gBAAtC;AAGA,MAAMC,KAAK,GAAG;AAACC,EAAAA,EAAE,EAAE,0BAAL;AAAiCC,EAAAA,QAAQ,EAAE;AAA3C,CAAd;;AACA,SAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACnBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAO;AACHG,IAAAA,IAAI,EAAEV,gBADH;AAEHO,IAAAA,IAAI,EAAEJ;AAFH,GAAP;AAIH;;AAID,OAAO,SAASQ,cAAT,CAAwBC,KAAxB,EAA+B;AAClC,MAAIA,KAAJ,EAAW;AACPJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACAd,IAAAA,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAkD,UAASH,KAAM,EAAjE;AACH,GAHD,MAGO;AACH,WAAOd,KAAK,CAACe,QAAN,CAAeG,MAAf,CAAsBD,MAAtB,CAA6B,eAA7B,CAAP;AACH;AACJ;AACD,OAAO,SAASE,QAAT,CAAkBP,IAAlB,EAAwBQ,QAAxB,EAAkC;AACrC,SAAOC,QAAQ,IAAI;AACf,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACrCvB,MAAAA,OAAO,CAAC,MAAD,EAAU,YAAWW,IAAK,EAA1B,EAA6BQ,QAA7B,CAAP,CACCK,IADD,CACM,CAAC;AAACX,QAAAA,KAAD;AAAQ,WAAGY;AAAX,OAAD,KAA0B;AAC/BC,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCd,KAAjC;AACAD,QAAAA,cAAc,CAACC,KAAD,CAAd;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAYe,QAAZ;AACAL,QAAAA,QAAQ,CAACb,OAAO,CAACkB,QAAD,CAAR,CAAR;AACAL,QAAAA,QAAQ,CAACjB,WAAW,EAAZ,CAAR;AACAmB,QAAAA,OAAO;AACP,OARD,EASCM,KATD,CASOC,GAAG,IAAI;AACb;AACGpB,QAAAA,OAAO,CAACC,GAAR,CAAYmB,GAAZ;AACAN,QAAAA,MAAM;AACT,OAbD;AAcF,KAfM,CAAP;AAgBH,GAjBD;AAkBH","sourcesContent":["import axios from \"axios\";\nimport { apiCall } from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"./errorActions\";\n\n\nconst stuff = {id: \"60d5df9269c6901c8801baaf\", username: \"2\"}\nfunction setUser(user) {\n    console.log(user)\n    return {\n        type: SET_CURRENT_USER,\n        user: stuff\n    }\n}\n\n\n\nexport function setTokenHeader(token) {\n    if (token) { \n        console.log(token)\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n    } else {\n        delete axios.defaults.header.common['Authorization']\n    }\n}\nexport function authUser(type, userData) {\n    return dispatch => {\n        return new Promise((resolve, reject) => {\n           apiCall('post', `api/auth/${type}`, userData)\n           .then(({token, ...userInfo}) => {\n            localStorage.setItem(\"jwtToken\", token)\n            setTokenHeader(token)\n            console.log(userInfo)\n            dispatch(setUser(userInfo))\n            dispatch(removeError())\n            resolve()\n           })\n           .catch(err => {\n            //    dispatch(addError(err))\n               console.log(err)\n               reject() \n           }) \n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}